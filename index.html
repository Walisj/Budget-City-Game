<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Build Your Budget City</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      background: #f0f4f8;
      padding: 20px;
    }
    h1 {
      font-size: 2em;
    }
    .building-option {
      margin: 10px;
      display: inline-block;
      padding: 10px;
      background: white;
      border-radius: 10px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      cursor: pointer;
    }
    .building-option:hover {
      background: #e0f7fa;
    }
    #cityView {
      margin: 20px auto;
      min-height: 100px;
      padding: 10px;
      background: #fff;
      border: 2px dashed #ccc;
      border-radius: 10px;
      max-width: 500px;
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
    }
    .result {
      font-weight: bold;
      font-size: 1.2em;
      margin-top: 15px;
    }
    .lang-btn {
      position: absolute;
      top: 10px;
      right: 10px;
    }
    button {
      cursor: pointer;
      margin: 5px;
    }
    .animated-building {
      animation: zoomIn 0.3s ease;
      margin: 5px;
    }
    @keyframes zoomIn {
      from { transform: scale(0.5); opacity: 0; }
      to { transform: scale(1); opacity: 1; }
    }
  </style>
</head>
<body>

  <div class="lang-btn">
    <button onclick="setLanguage('en')">English</button>
    <button onclick="setLanguage('ms')">BM</button>
  </div>

  <h1 id="title">Build Your Budget City</h1>
  <p id="intro">You have RM100 million. Choose wisely to develop your city!</p>

  <div id="budget">Remaining Budget: RM100 million</div>

  <div id="buildingChoices"></div>

  <div id="cityView"><i id="placeholder">No buildings yet.</i></div>

  <button onclick="finishPlanning()" style="padding: 10px 20px; font-size: 1em;">‚úÖ Done Planning</button>
  <button onclick="resetPlanning()" style="padding: 10px 20px; font-size: 1em; background-color: #f44336; color: white;">
    üóëÔ∏è Clear My Choices
  </button>

  <div class="result" id="result"></div>

  <script>
    const buildings = [
      { name: { en: "School", ms: "Sekolah" }, baseCost: 15, img: "üè´" },
      { name: { en: "Hospital", ms: "Hospital" }, baseCost: 20, img: "üè•" },
      { name: { en: "Park", ms: "Taman" }, baseCost: 5, img: "üå≥" },
      { name: { en: "Mall", ms: "Pusat Beli-Belah" }, baseCost: 18, img: "üè¨" },
      { name: { en: "Police Station", ms: "Balai Polis" }, baseCost: 10, img: "üëÆ‚Äç‚ôÇÔ∏è" },
      { name: { en: "Fire Station", ms: "Balai Bomba" }, baseCost: 12, img: "üöí" },
      { name: { en: "Library", ms: "Perpustakaan" }, baseCost: 8, img: "üìö" },
      { name: { en: "Playground", ms: "Taman Permainan" }, baseCost: 5, img: "üõù" }
    ];

    let selectedBuildings = [];
    let budget = 100;
    let lang = 'en';

    function setLanguage(l) {
      lang = l;
      document.getElementById("title").innerText = l === 'en' ? "Build Your Budget City" : "Bina Bandar Bajet Anda";
      document.getElementById("intro").innerText = l === 'en'
        ? "You have RM100 million. Choose wisely to develop your city!"
        : "Anda ada RM100 juta. Pilih dengan bijak untuk bangunkan bandar anda!";
      document.getElementById("budget").innerText = l === 'en'
        ? `Remaining Budget: RM${budget} million`
        : `Baki Bajet: RM${budget} juta`;
      document.getElementById("placeholder").innerText = l === 'en'
        ? "No buildings yet."
        : "Belum ada bangunan.";
      showBuildings();
    }

    function showBuildings() {
      const container = document.getElementById("buildingChoices");
      container.innerHTML = "";
      buildings.forEach((b, i) => {
        const div = document.createElement("div");
        div.className = "building-option";
        div.innerHTML = `<div>${b.img}</div><div>${b.name[lang]}</div>`;
        div.onclick = () => chooseSize(i);
        container.appendChild(div);
      });
    }

    function chooseSize(index) {
      const sizes = {
        small: { multiplier: 1, label: lang === 'en' ? 'Small' : 'Kecil' },
        medium: { multiplier: 2, label: lang === 'en' ? 'Medium' : 'Sederhana' },
        large: { multiplier: 3, label: lang === 'en' ? 'Large' : 'Besar' }
      };

      let options = "";
      for (let key in sizes) {
        const cost = buildings[index].baseCost * sizes[key].multiplier;
        options += `${sizes[key].label} (RM${cost}M)\n`;
      }

      const choice = prompt(`${lang === 'en' ? 'Choose building size:' : 'Pilih saiz bangunan:'}\n\n${options}`);
      if (!choice) return;

      let selectedSize = null;
      for (let key in sizes) {
        if (choice.toLowerCase().includes(sizes[key].label.toLowerCase())) {
          selectedSize = key;
          break;
        }
      }

      if (!selectedSize) {
        alert(lang === 'en' ? 'Invalid choice.' : 'Pilihan tidak sah.');
        return;
      }

      const cost = buildings[index].baseCost * sizes[selectedSize].multiplier;
      if (budget < cost) {
        alert(lang === 'en' ? "Not enough budget!" : "Bajet tidak mencukupi!");
        return;
      }

      budget -= cost;
      selectedBuildings.push({ ...buildings[index], size: selectedSize, cost });

      document.getElementById("budget").innerText = lang === 'en'
        ? `Remaining Budget: RM${budget} million`
        : `Baki Bajet: RM${budget} juta`;

      const city = document.getElementById("cityView");
      if (city.textContent.includes("No buildings") || city.textContent.includes("Belum ada")) {
        city.innerHTML = "";
      }

      const span = document.createElement("span");
      span.textContent = buildings[index].img;
      span.className = "animated-building";
      span.style.fontSize = selectedSize === 'small' ? "30px" :
                            selectedSize === 'medium' ? "45px" : "60px";
      city.appendChild(span);
    }

    function finishPlanning() {
      let msg = "";
      const spent = 100 - budget;

      if (budget < 0) {
        msg = lang === 'en'
          ? `You overspent! You fail as a Quantity Surveyor.`
          : `Anda terlebih bajet! Anda gagal sebagai Juruukur Bahan.`;
      } else if (budget >= 0 && budget <= 10) {
        msg = lang === 'en'
          ? `You spent RM${spent} million. Efficient planning!`
          : `Anda telah membelanjakan RM${spent} juta. Perancangan yang cekap!`;
      } else if (budget <= 30) {
        msg = lang === 'en'
          ? `You spent RM${spent} million. Great planning!`
          : `Anda telah membelanjakan RM${spent} juta. Perancangan yang hebat!`;
      } else {
        msg = lang === 'en'
          ? `You only used RM${spent} million. You could build more!`
          : `Anda hanya menggunakan RM${spent} juta. Anda boleh bina lebih banyak!`;
      }

      document.getElementById("result").innerText = msg;
    }

    function resetPlanning() {
      budget = 100;
      selectedBuildings = [];
      document.getElementById("result").innerText = "";

      const city = document.getElementById("cityView");
      city.innerHTML = `<i id="placeholder">${lang === 'en' ? "No buildings yet." : "Belum ada bangunan."}</i>`;

      document.getElementById("budget").innerText = lang === 'en'
        ? `Remaining Budget: RM${budget} million`
        : `Baki Bajet: RM${budget} juta`;

      showBuildings();
    }

    // Init
    setLanguage('en');
  </script>

</body>
</html>
