<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Build Your Budget City</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #eef4f8;
      text-align: center;
      padding: 20px;
    }

    h1 {
      font-size: 2em;
    }

    .building-option {
      display: inline-block;
      margin: 10px;
      background: white;
      border-radius: 10px;
      padding: 10px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      cursor: pointer;
      position: relative;
      overflow: hidden;
    }

    .building-option img {
      width: 60px;
      height: 60px;
      object-fit: contain;
    }

    #cityView {
      background: url('https://i.imgur.com/upOHde0.png') center/cover no-repeat;
      width: 90%;
      height: 400px;
      margin: 20px auto;
      border-radius: 10px;
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      align-items: center;
      position: relative;
      gap: 8px;
      padding: 10px;
    }

    .zone {
      flex: 1;
      min-width: 100px;
      min-height: 100px;
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      align-items: center;
      border: 1px dashed #ccc;
      border-radius: 5px;
      position: relative;
    }

    .building-img {
      width: 60px;
      height: 60px;
      object-fit: contain;
      margin: 5px;
      position: relative;
    }

    .sparkle {
      position: absolute;
      width: 100%;
      height: 100%;
      pointer-events: none;
      animation: sparkle 0.8s ease-out;
      background-image: radial-gradient(white, transparent 60%);
      background-repeat: repeat;
      background-size: 20px 20px;
      z-index: 2;
    }

    @keyframes sparkle {
      0% { opacity: 1; transform: scale(1); }
      100% { opacity: 0; transform: scale(2); }
    }

    .result {
      font-weight: bold;
      font-size: 1.2em;
      margin-top: 15px;
    }

    .done {
      background-color: #4caf50;
      color: white;
    }

    .clear {
      background-color: #f44336;
      color: white;
    }

    button {
      padding: 10px 20px;
      margin: 10px 5px;
      font-size: 1em;
      border: none;
      border-radius: 8px;
      cursor: pointer;
    }

    .person {
      position: absolute;
      width: 40px;
      height: auto;
      animation: walkZone 8s linear forwards;
      z-index: 1;
    }

    @keyframes walkZone {
      0% { left: -40px; }
      100% { left: 100%; }
    }
  </style>
</head>
<body>

  <h1>Build Your Budget City</h1>
  <p>You have RM100 million. Choose wisely to develop your city!</p>
  <div id="budget">Remaining Budget: RM100 million</div>

  <div id="buildingChoices"></div>

  <p>
    <label for="size">Choose Size: </label>
    <select id="size">
      <option value="1">Medium (Normal Cost)</option>
      <option value="0.75">Small (Cheaper)</option>
      <option value="1.25">Large (Expensive)</option>
    </select>

    <label for="zone">Place At: </label>
    <select id="zone">
      <option value="top">Top</option>
      <option value="left">Left</option>
      <option value="center">Center</option>
      <option value="right">Right</option>
      <option value="bottom">Bottom</option>
    </select>
  </p>

  <div id="cityView">
    <div id="top" class="zone"></div>
    <div id="left" class="zone"></div>
    <div id="center" class="zone"></div>
    <div id="right" class="zone"></div>
    <div id="bottom" class="zone"></div>
  </div>

  <button class="done" onclick="finishPlanning()">‚úÖ Done Planning</button>
  <button class="clear" onclick="resetPlanning()">üóëÔ∏è Clear My Choices</button>

  <div class="result" id="result"></div>

  <script>
    const buildings = [
      { name: "School", cost: 30, img: "https://i.imgur.com/D55hAJ5.gif" },
      { name: "Hospital", cost: 40, img: "https://i.imgur.com/hFGTjUw.gif" },
      { name: "Park", cost: 10, img: "https://i.imgur.com/aopODtG.png" },
      { name: "Mall", cost: 35, img: "https://i.imgur.com/MbExT3H.png" },
      { name: "Police Station", cost: 20, img: "https://i.imgur.com/SWMbTes.png" },
      { name: "Fire Station", cost: 25, img: "https://i.imgur.com/YKY1FXd.gif" },
      { name: "Library", cost: 15, img: "https://i.imgur.com/iOMz7mW.gif" },
      { name: "Playground", cost: 10, img: "https://i.imgur.com/uzmc9IE.gif" }
    ];

    const peopleGifs = [
      "https://i.imgur.com/HLFW4o5.gif",
      "https://i.imgur.com/iIFN5Ta.gif",
      "https://i.imgur.com/3ZaVHtm.gif",
      "https://i.imgur.com/YnaYfnM.gif"
    ];

    let selectedBuildings = [];
    let budget = 100;

    function renderBuildings() {
      const container = document.getElementById("buildingChoices");
      container.innerHTML = "";
      buildings.forEach((b, i) => {
        const div = document.createElement("div");
        div.className = "building-option";
        div.innerHTML = `<img src="${b.img}" /><div>${b.name}</div><div>RM${b.cost}M</div>`;
        div.onclick = () => {
          showSparkle(div);
          addBuilding(i);
        };
        container.appendChild(div);
      });
    }

    function addBuilding(index) {
      const sizeMultiplier = parseFloat(document.getElementById("size").value);
      const placement = document.getElementById("zone").value;
      const b = buildings[index];
      const adjustedCost = b.cost * sizeMultiplier;

      if (budget < adjustedCost) {
        alert("Not enough budget!");
        return;
      }

      budget -= adjustedCost;
      selectedBuildings.push({ ...b, sizeMultiplier });

      const zoneDiv = document.getElementById(placement);
      const img = document.createElement("img");
      img.src = b.img;
      img.className = "building-img";
      img.title = `${b.name} - RM${adjustedCost.toFixed(1)}M`;
      img.style.transform = `scale(${sizeMultiplier})`;

      zoneDiv.appendChild(img);
      showSparkle(img);
      animatePerson(zoneDiv);
      updateBudget();
    }

    function updateBudget() {
      document.getElementById("budget").innerText = `Remaining Budget: RM${budget.toFixed(1)} million`;
    }

    function finishPlanning() {
      const spent = 100 - budget;
      let msg = "";

      if (budget < 0) {
        msg = `üí∏ Uh-oh! You overspent by RM${Math.abs(budget).toFixed(1)} million. You fail as a Quantity Surveyor.`;
      } else if (budget <= 10) {
        msg = `‚úÖ Efficient planning! You spent RM${spent.toFixed(1)} million.`;
      } else if (budget <= 30) {
        msg = `üëç Great planning! You spent RM${spent.toFixed(1)} million.`;
      } else {
        msg = `üßê You only used RM${spent.toFixed(1)} million. You could build more!`;
      }

      document.getElementById("result").innerText = msg;
    }

    function resetPlanning() {
      selectedBuildings = [];
      budget = 100;
      document.getElementById("result").innerText = "";
      updateBudget();
      ["top", "left", "center", "right", "bottom"].forEach(id => {
        document.getElementById(id).innerHTML = "";
      });
    }

    function animatePerson(zone) {
      const person = document.createElement("img");
      const gif = peopleGifs[Math.floor(Math.random() * peopleGifs.length)];
      person.src = gif;
      person.className = "person";
      zone.appendChild(person);
      setTimeout(() => person.remove(), 8000);
    }

    function showSparkle(target) {
      const sparkle = document.createElement("div");
      sparkle.className = "sparkle";
      target.appendChild(sparkle);
      setTimeout(() => sparkle.remove(), 800);
    }

    // Initialize game
    renderBuildings();
    updateBudget();
  </script>
</body>
</html>
